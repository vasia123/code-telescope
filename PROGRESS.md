# План реализации проекта "Code Telescope"

## Общее описание
"Code Telescope" — инструмент на языке Go для генерации высокоуровневых карт кода проектов с использованием ЛЛМ. Инструмент анализирует исходные файлы проекта, извлекает их структуру (импорты, экспорты, публичные методы) и генерирует Markdown-документацию, представляющую каждый файл как "черный ящик" с описанием его интерфейсов.

## План реализации

### Этап 1: Настройка проекта
- [x] Создание структуры директорий проекта
- [x] Инициализация Go-модуля
- [x] Создание базового файла конфигурации
- [x] Настройка Makefile для сборки

### Этап 2: Модуль конфигурации
- [x] Реализация структуры конфигурации
- [x] Функции загрузки конфигурации из файла
- [x] Функции валидации конфигурации
- [x] Настройка параметров по умолчанию

### Этап 3: Модуль файловой системы
- [x] Реализация сканирования директорий
- [x] Фильтрация файлов на основе конфигурации
- [x] Сбор метаданных о файлах

### Этап 4: Модуль парсинга кода
- [x] Временная реализация без Tree-sitter
- [x] Исправление несоответствий между интерфейсами и реализациями
- [x] Доработка парсера Go для правильного анализа параметров и возвращаемых значений
- [x] Обработка методов, принадлежащих типам
- [ ] Настройка Tree-sitter для более точного парсинга
- [x] Реализация парсеров для других языков (JavaScript)
- [ ] Реализация парсера для Python

### Этап 5: Модуль взаимодействия с ЛЛМ
- [x] Абстрактный интерфейс ЛЛМ
- [x] Реализация для OpenAI API
- [x] Реализация для Anthropic API
- [x] Создание конструктора промптов
- [x] Доработка конструктора промптов для улучшения качества описаний

### Этап 6: Модуль генерации Markdown
- [x] Создание шаблонов для Markdown
- [x] Функции генерации разделов документации
- [x] Функции генерации полной карты кода
- [x] Исправление преобразования между типами CodeStructure и FileStructure

### Этап 7: Оркестратор
- [x] Координация всего процесса (базовый каркас)
- [x] Полная интеграция со всеми модулями
- [x] Обработка ошибок
- [x] Логирование
- [x] Исправление обработки методов в GenerateCodeMap
- [x] Правильное преобразование CodeStructure в формат FileStructure

### Этап 8: CLI и документация
- [x] Реализация CLI-интерфейса
- [ ] Создание пользовательской документации
- [ ] Создание примеров использования

### Этап 9: Тестирование
- [ ] Модульные тесты
  - [ ] Тестирование модуля конфигурации
  - [ ] Тестирование модуля файловой системы
  - [ ] Тестирование парсеров языков программирования
    - [ ] Тестирование парсера Go
    - [ ] Тестирование парсера JavaScript
    - [ ] Тестирование парсера Python (после реализации)
  - [ ] Тестирование преобразования между CodeStructure и FileStructure
  - [ ] Тестирование ЛЛМ-интерфейсов
    - [ ] Тестирование OpenAI провайдера
    - [ ] Тестирование Anthropic провайдера
- [ ] Интеграционные тесты
  - [ ] Интеграция парсеров и модуля файловой системы
  - [ ] Интеграция ЛЛМ-провайдеров и генератора Markdown
  - [ ] Тестирование оркестратора с моками компонентов
- [ ] E2E тесты
  - [ ] Тестирование полного процесса на простом Go-проекте
  - [ ] Тестирование полного процесса на JavaScript-проекте
  - [ ] Тестирование на реальных проектах разного размера

## Текущий статус и выявленные проблемы

### Основные достижения
1. Исправлено несоответствие между интерфейсами Parser в различных модулях
2. Доработан парсер Go для правильного извлечения параметров и возвращаемых значений
3. Создан функциональный парсер JavaScript
4. Реализовано преобразование между CodeStructure и FileStructure
5. Обновлен оркестратор для корректной обработки типов данных
6. Выделены общие утилиты парсинга в отдельный пакет

### Проблемы, требующие решения
1. Отсутствует парсер для Python
2. Не реализована интеграция с Tree-sitter для более точного парсинга
3. Требуется создание пользовательской документации
4. Нужны примеры использования для разных языков программирования
5. Отсутствие тестов для критических компонентов системы

## Следующие шаги
1. Реализовать парсер для Python
2. Интегрировать Tree-sitter для более точного парсинга
3. Создать пользовательскую документацию
4. Подготовить примеры использования
5. Разработать тесты для критических компонентов:
   - Парсеры для разных языков
   - Преобразование между структурами данных
   - Взаимодействие с ЛЛМ-сервисами
6. Провести тестирование на реальных проектах разного размера